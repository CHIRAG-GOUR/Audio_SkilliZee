<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Math Tug of War ‚Äì Fun Classroom Challenge</title>
  <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: linear-gradient(135deg, #fffde7 0%, #fff9c4 100%);
      --card: #ffffff;
      --accent: #ffeb3b;
      --shadow-md: 0 12px 36px rgba(0,0,0,0.14);
    }
    * { margin:0; padding:0; box-sizing:border-box; }
    body {
      font-family: 'Fredoka One', cursive, system-ui;
      background: var(--bg);
      color: #311b92;
      min-height: 100vh;
      overflow-x: hidden;
    }
    header {
      background: linear-gradient(90deg, #ffca28, #ffe082);
      color: #ef6c00;
      padding: 1.8rem 1rem;
      text-align: center;
      font-size: clamp(2.2rem, 5.5vw, 3.5rem);
      border-bottom: 8px solid #ffb300;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    #headerImage {
      border: 8px solid #ffb300;
      box-shadow: 0 0 35px #ffb300, 0 0 55px #ffeb3b;
      border-radius: 50%;
      width: clamp(180px, 28vw, 240px);
      height: clamp(180px, 28vw, 240px);
      margin-bottom: 1.2rem;
      object-fit: cover;
      animation: glow 2.8s ease-in-out infinite alternate;
    }
    @keyframes glow { from { box-shadow: 0 0 25px #ffb300; } to { box-shadow: 0 0 50px #ffeb3b; } }

    .setup-screen {
      position: fixed;
      inset: 0;
      background: rgba(255,193,7,0.45);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 100;
      padding: 1rem;
    }
    .setup-card {
      background: white;
      border-radius: 32px;
      padding: 2.2rem 2rem;
      max-width: 720px;
      width: 100%;
      box-shadow: var(--shadow-md);
      max-height: 94vh;
      overflow-y: auto;
      border: 6px solid var(--accent);
    }
    .stepper { display: flex; align-items: center; justify-content: center; margin: 1.8rem 0 2.2rem; }
    .step { flex: 1; text-align: center; position: relative; }
    .step-dot {
      width: 48px; height: 48px;
      background: #ffe082; color: #ef6c00;
      border-radius: 50%; display: flex;
      align-items: center; justify-content: center;
      font-size: 1.5rem; margin: 0 auto 8px;
      border: 3px solid #ffb300;
      transition: all 0.3s;
    }
    .step.active .step-dot {
      background: #ffeb3b; transform: scale(1.15);
      box-shadow: 0 0 0 8px rgba(255,202,40,0.4);
    }
    .step-line { height: 6px; background: #ffe082; flex: 2.2; margin: 0 14px; border-radius: 4px; }
    .step.active ~ .step-line { background: #ffca28; }

    h2 { font-size: 2.3rem; margin-bottom: 1.6rem; color: #ef6c00; text-align: center; }
    h3 { font-size: 1.65rem; margin-bottom: 1.3rem; color: #f57f17; }

    .option-grid {
      display: flex; flex-wrap: wrap; gap: 16px; justify-content: center;
    }
    .option-btn {
      padding: 16px 32px; font-size: 1.25rem;
      border-radius: 16px; border: 3px solid #ffb300;
      background: #fff8e1; cursor: pointer;
      transition: all 0.28s; min-width: 140px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
      color: #ef6c00; opacity: 0.78;
    }
    .option-btn.active, .option-btn:hover {
      background: #ffeb3b; opacity: 1;
      transform: translateY(-4px);
      box-shadow: 0 10px 28px rgba(255,202,40,0.45);
    }

    .team-row { display: flex; align-items: center; justify-content: center; gap: 3rem; flex-wrap: wrap; margin: 1.8rem 0; }
    .team-card {
      background: rgba(255,253,231,0.95); border-radius: 24px;
      padding: 1.8rem 2.2rem; width: 300px; text-align: center;
      box-shadow: 0 8px 24px rgba(239,108,0,0.15);
      border: 4px solid #ffb300;
    }
    .team-card.blue { border-color: #64b5f6; }
    .team-card.red  { border-color: #ef5350; }
    .team-card input {
      margin-top: 1rem; padding: 12px 16px; font-size: 1.3rem;
      width: 100%; border: 3px solid #ffb300; border-radius: 14px;
      background: #fffde7; color: #ef6c00;
    }
    .vs { font-size: 3rem; color: #f57f17; }

    .nav-row { display: flex; gap: 20px; justify-content: center; margin-top: 2.4rem; flex-wrap: wrap; }
    .btn {
      padding: 16px 44px; font-size: 1.4rem; border: none;
      border-radius: 999px; cursor: pointer; display: flex;
      align-items: center; gap: 12px; transition: all 0.25s;
    }
    .btn-primary { background: #ffca28; color: #ef6c00; }
    .btn-primary:hover { background: #ffb300; transform: translateY(-3px); }
    .btn-primary:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
    .btn-secondary { background: #ffe082; color: #ef6c00; }

    main { padding: 2rem 1.4rem; max-width: 2000px; margin: 0 auto; }
    .game-layout {
      display: flex; justify-content: center; align-items: stretch;
      gap: 2.2rem; flex-wrap: nowrap; width: 100%;
    }
    .numpad-panel {
      background: white; border-radius: 28px; padding: 1.6rem;
      box-shadow: var(--shadow-md); width: 26%; min-width: 280px;
      max-width: 360px; border: 5px solid var(--accent);
      display: flex; flex-direction: column;
    }
    .panel-head { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.2rem; }
    .panel-head h3 { margin:0; font-size:1.65rem; color:#ef6c00; }
    .score-pill {
      background: #ffeb3b; color: #ef6c00; padding: 8px 16px;
      border-radius: 999px; font-size: 1.35rem; box-shadow: 0 3px 10px rgba(0,0,0,0.15);
    }

    .equation {
      font-size: clamp(2.1rem, 4.2vw, 3rem);
      text-align: center; margin: 1rem 0 1.4rem;
      color: #111; min-height: 65px;
    }
    .answer-field {
      width: 100%; font-size: clamp(2.6rem, 5vw, 4rem);
      text-align: center; padding: 12px;
      border: 5px solid #ffb300; border-radius: 14px;
      margin-bottom: 1.4rem; background: #fffde7; color: #ef6c00;
    }
    .numpad-grid {
      display: grid; grid-template-columns: repeat(3,1fr); gap: 12px; flex:1;
    }
    .numpad-btn {
      aspect-ratio: 1/1; font-size: clamp(1.8rem, 4vw, 2.3rem);
      border-radius: 14px; border: none; background: #ffe082;
      cursor: pointer; transition: all 0.15s; color: #ef6c00;
      display: flex; align-items: center; justify-content: center;
    }
    .numpad-btn:hover { background: #ffca28; transform: translateY(-2px); }
    .numpad-btn:active { transform: scale(0.94); }
    .clear { background: #ef5350; color: white; }
    .submit { background: #66bb6a; color: white; }

    .arena-wrapper { 
      flex: 1; 
      min-width: 480px; 
      max-width: 960px; 
      display: flex; 
      flex-direction: column; 
      gap: 1.2rem; 
      position: relative;
    }
    .scoreboard {
      display: flex; justify-content: space-between; font-size: clamp(1.4rem, 2.8vw, 1.8rem);
      padding: 0 1.2rem; align-items: center;
    }
    .timer-box {
      background: rgba(255,255,255,0.9); padding: 10px 28px;
      border-radius: 999px; box-shadow: 0 4px 14px rgba(0,0,0,0.15);
      font-size: 1.5rem; color: #ef6c00;
    }

    .arena-box {
      flex: 1; 
      position: relative;
      background: white;
      border-radius: 24px; 
      overflow: hidden;
      box-shadow: var(--shadow-md); 
      border: 5px solid var(--accent);
      aspect-ratio: 16 / 9;
      max-height: 70vh;
    }
    .center-marker {
      position: absolute; left: 50%; top: 0; bottom: 0;
      width: 8px; background: repeating-linear-gradient(to bottom, #fff 0, #fff 20px, #ffb300 20px, #ffb300 40px);
      transform: translateX(-50%); z-index: 5;
      box-shadow: 0 0 16px rgba(255,179,0,0.7);
    }
    .video-container {
      width: 100%; height: 100%; position: relative;
      transition: transform 0.9s cubic-bezier(0.34, 1.56, 0.64, 1);
    }
    video {
      width: 100%; height: 100%; object-fit: contain;
      position: absolute; top: 0; left: 0;
    }

    .win-overlay {
      position: absolute; inset: 0;
      background: rgba(239,108,0,0.45); display: flex;
      align-items: center; justify-content: center; color: white;
      z-index: 100; opacity: 0; pointer-events: none; transition: opacity 0.9s;
    }
    .win-overlay.visible { opacity: 1; pointer-events: auto; }

    /* New zoom & fullscreen controls - placed BELOW the center panel */
    .center-controls {
      display: flex;
      justify-content: center;
      gap: 16px;
      margin-top: 12px;
      flex-wrap: wrap;
    }

    .center-ctrl-btn {
      width: 56px;
      height: 56px;
      border-radius: 50%;
      background: rgba(239,108,0,0.85);
      color: white;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 3px 10px rgba(0,0,0,0.2);
    }

    .center-ctrl-btn:hover {
      background: rgba(239,108,0,1);
      transform: scale(1.08);
    }

    .zoom-level {
      font-size: 1.2rem;
      color: #ef6c00;
      min-width: 60px;
      text-align: center;
      line-height: 56px;
    }

    @media (max-width: 1100px) {
      .game-layout { gap: 1.8rem; }
      .numpad-panel { width: 30%; min-width: 260px; }
      .arena-wrapper { max-width: 50%; }
    }
    @media (max-width: 768px) {
      .game-layout { flex-wrap: wrap; gap: 2.2rem; }
      .numpad-panel { width: 46%; }
      .arena-wrapper { width: 100%; order: -1; aspect-ratio: auto; max-height: none; }
      .arena-box { aspect-ratio: 16 / 9; height: 45vh; }
      .center-controls { margin-top: 8px; gap: 12px; }
      .center-ctrl-btn { width: 48px; height: 48px; font-size: 1.3rem; }
    }
  </style>
</head>
<body>

<header>
  <img id="headerImage" src="https://chirag-gour.github.io/Audio_SkilliZee/Ai%20Assistant%202/1-modified.png" alt="Math Tug of War Logo" />
  Math Tug of War
</header>

<div id="setupScreen" class="setup-screen">
  <div class="setup-card">
    <h2>Prepare Your Teams</h2>
    <div class="stepper">
      <div class="step active"><div class="step-dot">1</div><div>Operations</div></div>
      <div class="step-line"></div>
      <div class="step"><div class="step-dot">2</div><div>Difficulty</div></div>
      <div class="step-line"></div>
      <div class="step"><div class="step-dot">3</div><div>Teams</div></div>
    </div>

    <div id="stepsContainer">
      <div class="step-content" data-step="0">
        <h3>Select Operations You Want</h3>
        <div class="option-grid">
          <button class="option-btn" data-op="+">+ Addition</button>
          <button class="option-btn" data-op="-">‚àí Subtraction</button>
          <button class="option-btn" data-op="*">√ó Multiplication</button>
          <button class="option-btn" data-op="/">√∑ Division</button>
        </div>
      </div>

      <div class="step-content" data-step="1" style="display:none;">
        <h3>Choose Difficulty</h3>
        <div class="option-grid">
          <button class="option-btn active" data-level="easy">Easy</button>
          <button class="option-btn" data-level="medium">Medium</button>
          <button class="option-btn" data-level="hard">Hard</button>
        </div>
      </div>

      <div class="step-content" data-step="2" style="display:none;">
        <div class="team-row">
          <div class="team-card blue">
            <h3>Team Blue</h3>
            <input type="text" id="teamBlueName" placeholder="Team name" maxlength="20"/>
          </div>
          <div class="vs">VS</div>
          <div class="team-card red">
            <h3>Team Red</h3>
            <input type="text" id="teamRedName" placeholder="Team name" maxlength="20"/>
          </div>
        </div>
      </div>
    </div>

    <div class="nav-row">
      <button class="btn btn-secondary" id="btnBack" disabled>Back</button>
      <button class="btn btn-primary" id="btnNext">Next ‚Üí</button>
      <button class="btn btn-primary" id="btnStart" style="display:none;" disabled>Start Game ‚ñ∂</button>
    </div>
  </div>
</div>

<main id="gameMain" style="display:none;">
  <div class="game-layout">

    <div class="numpad-panel">
      <div class="panel-head">
        <h3 id="blueHeader">Team Blue</h3>
        <div class="score-pill" id="blueScore">0</div>
      </div>
      <div class="equation" id="blueEquation"></div>
      <input type="text" class="answer-field" id="blueAnswer" readonly placeholder="0"/>
      <div class="numpad-grid">
        <button class="numpad-btn" data-side="blue" data-value="1">1</button>
        <button class="numpad-btn" data-side="blue" data-value="2">2</button>
        <button class="numpad-btn" data-side="blue" data-value="3">3</button>
        <button class="numpad-btn" data-side="blue" data-value="4">4</button>
        <button class="numpad-btn" data-side="blue" data-value="5">5</button>
        <button class="numpad-btn" data-side="blue" data-value="6">6</button>
        <button class="numpad-btn" data-side="blue" data-value="7">7</button>
        <button class="numpad-btn" data-side="blue" data-value="8">8</button>
        <button class="numpad-btn" data-side="blue" data-value="9">9</button>
        <button class="numpad-btn clear" data-side="blue" data-action="clear">C</button>
        <button class="numpad-btn" data-side="blue" data-value="0">0</button>
        <button class="numpad-btn submit" data-side="blue" data-action="submit">OK</button>
      </div>
    </div>

    <div class="arena-wrapper">
      <div class="scoreboard">
        <div><span id="blueName">Team Blue</span> <span id="blueCorrect">0</span></div>
        <div class="timer-box">‚è± <span id="gameTimer">00:00</span></div>
        <div><span id="redName">Team Red</span> <span id="redCorrect">0</span></div>
      </div>

      <div class="arena-box">
        <div class="center-marker"></div>
        <div id="videoContainer" class="video-container">
          <video id="mainVideo" autoplay loop muted playsinline>
            <source src="https://chirag-gour.github.io/Audio_SkilliZee/Ai%20Assistant%202/main.mp4" type="video/mp4">
          </video>
          <video id="blueWinVideo" style="display:none;" autoplay muted playsinline>
            <source src="https://chirag-gour.github.io/Audio_SkilliZee/Ai%20Assistant%202/win_blue.mp4" type="video/mp4">
          </video>
          <video id="redWinVideo" style="display:none;" autoplay muted playsinline>
            <source src="https://chirag-gour.github.io/Audio_SkilliZee/Ai%20Assistant%202/win_red.mp4" type="video/mp4">
          </video>
        </div>
        <div id="winOverlay" class="win-overlay">
          <div class="win-content">
            <div class="trophy">üèÜ</div>
            <h2 id="winnerTitle"></h2>
            <p>Wins!</p>
            <button class="btn btn-primary" onclick="location.reload()">Play Again</button>
          </div>
        </div>
      </div>

      <!-- Zoom & Fullscreen controls BELOW the center panel -->
      <div class="center-controls">
        <button class="center-ctrl-btn" id="zoomOut" title="Zoom Out">-</button>
        <span class="zoom-level" id="zoomLevel">100%</span>
        <button class="center-ctrl-btn" id="zoomIn" title="Zoom In">+</button>
        <button class="center-ctrl-btn" id="fullscreen" title="Toggle Fullscreen">‚õ∂</button>
      </div>
    </div>

    <div class="numpad-panel">
      <div class="panel-head">
        <h3 id="redHeader">Team Red</h3>
        <div class="score-pill" id="redScore">0</div>
      </div>
      <div class="equation" id="redEquation"></div>
      <input type="text" class="answer-field" id="redAnswer" readonly placeholder="0"/>
      <div class="numpad-grid">
        <button class="numpad-btn" data-side="red" data-value="1">1</button>
        <button class="numpad-btn" data-side="red" data-value="2">2</button>
        <button class="numpad-btn" data-side="red" data-value="3">3</button>
        <button class="numpad-btn" data-side="red" data-value="4">4</button>
        <button class="numpad-btn" data-side="red" data-value="5">5</button>
        <button class="numpad-btn" data-side="red" data-value="6">6</button>
        <button class="numpad-btn" data-side="red" data-value="7">7</button>
        <button class="numpad-btn" data-side="red" data-value="8">8</button>
        <button class="numpad-btn" data-side="red" data-value="9">9</button>
        <button class="numpad-btn clear" data-side="red" data-action="clear">C</button>
        <button class="numpad-btn" data-side="red" data-value="0">0</button>
        <button class="numpad-btn submit" data-side="red" data-action="submit">OK</button>
      </div>
    </div>

  </div>
</main>

<script>
// CONFIG
const LEVELS = {
  easy:   { min: 2,  max: 12  },
  medium: { min: 5,  max: 50  },
  hard:   { min: 10, max: 200 }
};

const OPS = ['+', '-', '*', '/'];
const WIN_SCORE = 6;
const PULL_STEP = 45;

const setupScreen   = document.getElementById('setupScreen');
const gameMain      = document.getElementById('gameMain');
const steps         = document.querySelectorAll('.step-content');
const btnBack       = document.getElementById('btnBack');
const btnNext       = document.getElementById('btnNext');
const btnStart      = document.getElementById('btnStart');
const blueEquation  = document.getElementById('blueEquation');
const redEquation   = document.getElementById('redEquation');
const blueAnswer    = document.getElementById('blueAnswer');
const redAnswer     = document.getElementById('redAnswer');
const blueScore     = document.getElementById('blueScore');
const redScore      = document.getElementById('redScore');
const blueCorrect   = document.getElementById('blueCorrect');
const redCorrect    = document.getElementById('redCorrect');
const gameTimer     = document.getElementById('gameTimer');
const winOverlay    = document.getElementById('winOverlay');
const winnerTitle   = document.getElementById('winnerTitle');
const videoContainer= document.getElementById('videoContainer');
const mainVideo     = document.getElementById('mainVideo');
const blueWinVideo  = document.getElementById('blueWinVideo');
const redWinVideo   = document.getElementById('redWinVideo');

let currentStepIndex   = 0;
let selectedOps        = [];
let selectedLevel      = 'easy';
let blueName           = 'Team Blue';
let redName            = 'Team Red';
let currentA           = 0;
let currentB           = 0;
let currentOp          = '+';
let currentAnswer      = 0;
let usedQuestions      = new Set();
let timerInterval      = null;
let gameTime           = 0;
let blueCorrectCount   = 0;
let redCorrectCount    = 0;
let gameActive         = false;
let answeredThisRound  = false;

// SETUP LOGIC
function showStep(index) {
  steps.forEach((el,i) => el.style.display = i===index ? 'block' : 'none');
  btnBack.disabled = index === 0;
  btnNext.style.display = index < 2 ? 'inline-flex' : 'none';
  btnStart.style.display = index === 2 ? 'inline-flex' : 'none';
  updateStartButtonState();
}

function updateStartButtonState() {
  btnStart.disabled = selectedOps.length === 0;
}

document.querySelectorAll('.option-btn[data-op]').forEach(btn => {
  btn.addEventListener('click', () => {
    btn.classList.toggle('active');
    selectedOps = Array.from(document.querySelectorAll('.option-btn[data-op].active'))
                      .map(b => b.dataset.op);
    updateStartButtonState();
  });
});

document.querySelectorAll('.option-btn[data-level]').forEach(btn => {
  btn.addEventListener('click', () => {
    document.querySelectorAll('.option-btn[data-level]').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    selectedLevel = btn.dataset.level;
  });
});

btnNext.onclick = () => { if (currentStepIndex < 2) showStep(++currentStepIndex); };
btnBack.onclick = () => { if (currentStepIndex > 0) showStep(--currentStepIndex); };

btnStart.onclick = () => {
  blueName = document.getElementById('teamBlueName').value.trim() || 'Team Blue';
  redName  = document.getElementById('teamRedName').value.trim()  || 'Team Red';
  document.getElementById('blueHeader').textContent = blueName;
  document.getElementById('redHeader').textContent  = redName;
  document.getElementById('blueName').textContent   = blueName;
  document.getElementById('redName').textContent    = redName;

  setupScreen.style.display = 'none';
  gameMain.style.display = 'block';
  startGame();
};

// QUESTION GENERATION
function generateNewQuestion() {
  const cfg = LEVELS[selectedLevel];
  const availOps = selectedOps.length > 0 ? selectedOps : OPS;
  let attempts = 0;
  const MAX_ATTEMPTS = 200;

  while (attempts < MAX_ATTEMPTS) {
    attempts++;
    const op = availOps[Math.floor(Math.random() * availOps.length)];

    let a = Math.floor(Math.random() * (cfg.max - cfg.min + 1)) + cfg.min;
    let b = Math.floor(Math.random() * (cfg.max - cfg.min + 1)) + cfg.min;

    if (op === '/' || op === '*') {
      if (b === 0) b = 1;
      if (op === '/') {
        b = Math.floor(Math.random() * (cfg.max - 2)) + 2;
        a = b * (Math.floor(Math.random() * 12) + 1);
      }
    }

    if (op === '-' && a < b) [a, b] = [b, a];

    const key = `${a}|${op}|${b}`;
    if (!usedQuestions.has(key)) {
      usedQuestions.add(key);
      currentA = a;
      currentB = b;
      currentOp = op;

      if (op === '+') currentAnswer = a + b;
      else if (op === '-') currentAnswer = a - b;
      else if (op === '*') currentAnswer = a * b;
      else currentAnswer = a / b;

      const eq = `${a} ${op} ${b} = `;
      blueEquation.textContent = eq;
      redEquation.textContent  = eq;
      answeredThisRound = false;
      return;
    }
  }

  // Fallback - clear oldest if too many
  if (usedQuestions.size > 4000) {
    const iterator = usedQuestions.values();
    for (let i = 0; i < 1000; i++) iterator.next();
  }
  generateNewQuestion();
}

// GAME FLOW
function startGame() {
  gameActive = true;
  blueCorrectCount = redCorrectCount = 0;
  blueAnswer.value = redAnswer.value = '';
  blueScore.textContent = redScore.textContent = '0';
  blueCorrect.textContent = redCorrect.textContent = '0';
  winOverlay.classList.remove('visible');
  mainVideo.style.display = 'block';
  blueWinVideo.style.display = redWinVideo.style.display = 'none';
  updatePull();
  startTimer();
  generateNewQuestion();
}

function updatePull() {
  const shift = redCorrectCount - blueCorrectCount;
  videoContainer.style.transform = `translateX(${shift * PULL_STEP}px)`;
  blueScore.textContent = blueCorrectCount;
  redScore.textContent  = redCorrectCount;
}

function startTimer() {
  gameTime = 0;
  timerInterval = setInterval(() => {
    gameTime++;
    const min = String(Math.floor(gameTime / 60)).padStart(2,'0');
    const sec = String(gameTime % 60).padStart(2,'0');
    gameTimer.textContent = `${min}:${sec}`;
  }, 1000);
}

function checkAnswer(side) {
  if (!gameActive || answeredThisRound) return;
  const input = side === 'blue' ? blueAnswer : redAnswer;
  const val = parseInt(input.value.trim(), 10);

  if (!isNaN(val) && val === currentAnswer) {
    answeredThisRound = true;
    if (side === 'blue') {
      blueCorrectCount++;
      blueCorrect.textContent = blueCorrectCount;
    } else {
      redCorrectCount++;
      redCorrect.textContent = redCorrectCount;
    }
    updatePull();

    setTimeout(() => {
      blueAnswer.value = redAnswer.value = '';
      generateNewQuestion();
    }, 1100);

    if (blueCorrectCount >= WIN_SCORE) endGame('blue');
    else if (redCorrectCount >= WIN_SCORE) endGame('red');
  } else {
    input.style.borderColor = '#ef5350';
    setTimeout(() => input.style.borderColor = '#ffb300', 700);
  }
}

function endGame(winner) {
  gameActive = false;
  clearInterval(timerInterval);
  videoContainer.style.transform = 'translateX(0)';

  const name = winner === 'blue' ? blueName : redName;
  winnerTitle.textContent = `${name} Wins!`;
  winOverlay.classList.add('visible');
  mainVideo.style.display = 'none';

  if (winner === 'blue') blueWinVideo.style.display = 'block';
  else redWinVideo.style.display = 'block';

  setTimeout(() => location.reload(), 6500);
}

// NUMPAD
document.querySelectorAll('.numpad-btn').forEach(btn => {
  btn.onclick = () => {
    const side  = btn.dataset.side;
    const input = side === 'blue' ? blueAnswer : redAnswer;
    const act   = btn.dataset.action;
    const val   = btn.dataset.value;

    if (act === 'clear') {
      input.value = '';
    } else if (act === 'submit') {
      checkAnswer(side);
    } else if (val) {
      input.value += val;
    }
  };
});

// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
// ZOOM & FULLSCREEN CONTROLS (now below center)
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
let zoom = 100;

document.getElementById('zoomIn').onclick = () => {
  zoom = Math.min(zoom + 10, 180);
  document.body.style.zoom = zoom + '%';
  document.getElementById('zoomLevel').textContent = zoom + '%';
};

document.getElementById('zoomOut').onclick = () => {
  zoom = Math.max(zoom - 10, 60);
  document.body.style.zoom = zoom + '%';
  document.getElementById('zoomLevel').textContent = zoom + '%';
};

document.getElementById('fullscreen').onclick = () => {
  if (!document.fullscreenElement) {
    document.documentElement.requestFullscreen().catch(() => {});
  } else {
    document.exitFullscreen();
  }
};

// Init
showStep(0);
</script>
</body>
</html>
